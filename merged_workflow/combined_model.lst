GAMS 28.2.0  r750fa45 Released Aug 19, 2019 WEX-WEI x86 64bit/MS Windows                                                                                                                                                               01/24/24 16:13:48 Page 1
cActivator toy example
C o m p i l a t i o n


   2  Option Seed=42;
   3   
   4  * Load in cEffector Matrix
   5  * Set Dimensions
   6  Set
   7     gene 'genes'
   8     sample 'samples'
   9     stable_constant 'constant across all'
  10         / kd_act_metab,
  11           kd_inh_metab /
  12     gene_constant 'grid basal constants'
  13         / KdRNAP,
  14           KdRNAPCrp,
  15           mRNA_total,
  16           cell_volume,
  17           k_d_TF,
  18           kDeg,
  19           promoterConcVal,
  20           TF,
  21           u,
  22           kEscape,
  23           KeqOpening /
  24      sample_constant 'grid basal constants'
  25         / RNAP /
  26      limits 'input parameters'
  27         / act_TF_conc_lo,
  28           act_TF_conc_up,
  29           act_Kd_lo,
  30           act_Kd_up,
  31           inh_TF_conc_lo,
  32           inh_TF_conc_up,
  33           inh_Kd_lo,
  34           inh_Kd_up,
  35           weight_act_obj1,
  36           weight_inh_obj1,
  37           weight_act_obj2,
  38           weight_inh_obj2,
  39           weight_mRNA_match,
  40           weight_act_corr,
  41           weight_inh_corr,
  42           inh_metab_Total_lo,
  43           inh_metab_Total_up /
  44   
  45  * Load in saved values
**** File: C:\Users\SBRG_2024\Documents\GitHub\regulonML\merged_workflow\./input_GDX/input_cAct.gdx
**** Msg : No such file or directory
  47  $gdxIn ./input_GDX/input_cAct.gdx
****                                  $510
  48  $load sample = dim1
****      $502
  49  $load gene = dim2
****      $502
  50  Parameter cAct(sample, gene) 'cAct values';
GAMS 28.2.0  r750fa45 Released Aug 19, 2019 WEX-WEI x86 64bit/MS Windows                                                                                                                                                               01/24/24 16:13:48 Page 2
cActivator toy example
C o m p i l a t i o n


  51  $load cAct
****      $502
  53   
**** File: C:\Users\SBRG_2024\Documents\GitHub\regulonML\merged_workflow\./input_GDX/input_cInh.gdx
**** Msg : No such file or directory
  55  $gdxIn ./input_GDX/input_cInh.gdx
****                                  $510
  56  Parameter cInh(sample, gene) 'cInh values';
  57  $load cInh
****      $502
  59   
**** File: C:\Users\SBRG_2024\Documents\GitHub\regulonML\merged_workflow\./input_GDX/input_act_TF_conc.gdx
**** Msg : No such file or directory
  61  $gdxIn ./input_GDX/input_act_TF_conc.gdx
****                                         $510
  62  Parameter meas_act_TF(sample) 'actual act TF values';
  63  $load meas_act_TF
****      $502
  65   
**** File: C:\Users\SBRG_2024\Documents\GitHub\regulonML\merged_workflow\./input_GDX/input_inh_TF_conc.gdx
**** Msg : No such file or directory
  67  $gdxIn ./input_GDX/input_inh_TF_conc.gdx
****                                         $510
  68  Parameter meas_inh_TF(sample) 'actual inh TF values';
  69  $load meas_inh_TF
****      $502
  71   
**** File: C:\Users\SBRG_2024\Documents\GitHub\regulonML\merged_workflow\./input_GDX/basal.gdx
**** Msg : No such file or directory
  73  $gdxIn ./input_GDX/basal.gdx
****                             $510
  74  Parameter basal_constants(gene_constant, gene) 'basal constants';
  75  $load basal_constants
****      $502
  77   
**** File: C:\Users\SBRG_2024\Documents\GitHub\regulonML\merged_workflow\./input_GDX/sample_basal.gdx
**** Msg : No such file or directory
  79  $gdxIn ./input_GDX/sample_basal.gdx
****                                    $510
  80  Parameter sample_constants(sample_constant, sample) 'sample constants';
  81  $load sample_constants
****      $502
  83   
**** File: C:\Users\SBRG_2024\Documents\GitHub\regulonML\merged_workflow\./input_GDX/input_constants.gdx
**** Msg : No such file or directory
  85  $gdxIn ./input_GDX/input_constants.gdx
****                                       $510
  86  Parameter input_constants(stable_constant) 'input constants';
  87  $load input_constants
****      $502
  89   
GAMS 28.2.0  r750fa45 Released Aug 19, 2019 WEX-WEI x86 64bit/MS Windows                                                                                                                                                               01/24/24 16:13:48 Page 3
cActivator toy example
C o m p i l a t i o n


**** File: C:\Users\SBRG_2024\Documents\GitHub\regulonML\merged_workflow\./input_GDX/actual_mRNA.gdx
**** Msg : No such file or directory
  91  $gdxIn ./input_GDX/actual_mRNA.gdx
****                                   $510
  92  Parameter actual_mRNA(sample, gene) 'actual_mRNA';
  93  $load actual_mRNA
****      $502
  95   
**** File: C:\Users\SBRG_2024\Documents\GitHub\regulonML\merged_workflow\./input_GDX/max_cAct.gdx
**** Msg : No such file or directory
  97  $gdxIn ./input_GDX/max_cAct.gdx
****                                $510
  98  Parameter max_cAct(gene) 'max_cAct';
  99  $load max_cAct
****      $502
 101   
**** File: C:\Users\SBRG_2024\Documents\GitHub\regulonML\merged_workflow\./input_GDX/max_cInh.gdx
**** Msg : No such file or directory
 103  $gdxIn ./input_GDX/max_cInh.gdx
****                                $510
 104  Parameter max_cInh(gene) 'max_cInh';
 105  $load max_cInh
****      $502
 107   
**** File: C:\Users\SBRG_2024\Documents\GitHub\regulonML\merged_workflow\./input_GDX/input_parameters.gdx
**** Msg : No such file or directory
 109  $gdxIn ./input_GDX/input_parameters.gdx
****                                        $510
 110  Parameter input_parameters(limits) 'input_paras';
 111  $load input_parameters
****      $502
 113   
 114  ***
 115  * Set up other matrices
 116  Variables
 117      act_TF_conc(sample) 'TF concentration'
 118      act_Kd(gene) 'Kd Values'
 119      inh_Kd(gene) 'Kd Values'
 120      act_metab_Total(sample)
 121      inh_metab_Total(sample);
 122   
 123  Display input_parameters;
****                         $141
 124  Display sample_constants;
****                         $141
 125   
 126  * constrain matrices
 127  act_TF_conc.lo(sample) = log10(input_parameters('act_TF_conc_lo'));
****                      $352
 128  act_TF_conc.up(sample) = log10(input_parameters('act_TF_conc_up'));
****                      $352
 129  act_Kd.lo(gene) = log10(input_parameters('act_Kd_lo'));
****               $352
GAMS 28.2.0  r750fa45 Released Aug 19, 2019 WEX-WEI x86 64bit/MS Windows                                                                                                                                                               01/24/24 16:13:48 Page 4
cActivator toy example
C o m p i l a t i o n


 130  act_Kd.up(gene) = log10(input_parameters('act_Kd_up'));
****               $352
 131  inh_Kd.lo(gene) = log10(input_parameters('inh_Kd_lo'));
****               $352
 132  inh_Kd.up(gene) = log10(input_parameters('inh_Kd_up'));
****               $352
 133  inh_metab_Total.lo(sample) = log10(input_parameters('inh_metab_Total_lo'));
****                          $352
 134  inh_metab_Total.up(sample) = log10(input_parameters('inh_metab_Total_up'));
****                          $352
 135   
 136   
      * standard values for above
      act_TF_conc.lo(sample) = log10(1E-8);
      act_TF_conc.up(sample) = log10(1E-5);
      act_Kd.lo(gene) = log10(1E-10);
      act_Kd.up(gene) = log10(1E-6);
      inh_Kd.lo(gene) = log10(1E-10);
      inh_Kd.up(gene) = log10(1E-6);
      act_metab_Total.lo(gene) = log10(1E-10);
      act_metab_Total.up(gene) = log10(1E-6);
      inh_metab_Total.lo(gene) = log10(1E-5);
      inh_metab_Total.up(gene) = log10(1E-3);
 150   
 151  * initialize matrices
 152  act_TF_conc.l(sample) = uniformInt(-10, -3);
****                     $352
 153  act_Kd.l(gene) = uniformInt(-10, -3);
****              $352
 154  inh_Kd.l(gene) = uniformInt(-10, -3);
****              $352
 155  inh_metab_Total.l(sample) = uniformInt(-10, -3);
****                         $352
 156   
 157  * Now set up the optimization
 158  Variables
 159      act_diff1   difference between TF_conc div Kd and Ceff
 160      inh_diff1   similar
 161      match_diff
 162      total_diff;
 163   
 164  * calculated sub variables
 165  Variables
 166      cAct_calc(sample, gene)
 167      cInh_calc(sample, gene);
 168   
 169  Equations
 170      eq_cAct_calc(sample, gene)
 171      eq_cInh_calc(sample, gene);
 172   
 173  Equations
 174      act_obj1   difference between TF_conc div Kd and cEff
 175      inh_obj1   difference between TF_conc div Kd and cEff
GAMS 28.2.0  r750fa45 Released Aug 19, 2019 WEX-WEI x86 64bit/MS Windows                                                                                                                                                               01/24/24 16:13:48 Page 5
cActivator toy example
C o m p i l a t i o n


 176      match_obj  difference between predicted and actual mRNA
 177      total_obj;
 178   
 179   
 180  * Set weights for the two objectives (you can adjust these weights as needed)
 181  * mRNA weighting
 182  Scalar weight_balance3 /195260.5676/;
 183  * TF conenctration correlation matching
 184  Scalar weight_balance4 /1953.70798879785/;
 185  Scalar weight_act_obj1 /1/;
 186  Scalar weight_inh_obj1 /1/;
 187  Scalar weight_mRNA_match /0/;
 188  Scalar weight_act_corr /0/;
 189  Scalar weight_inh_corr /0/;
 190   
 191   
 192  * set them from parameters file
 193  weight_act_obj1 = input_parameters('weight_act_obj1');
 194  weight_inh_obj1 = input_parameters('weight_inh_obj1');
 195  weight_mRNA_match = input_parameters('weight_mRNA_match');
 196  weight_act_corr = input_parameters('weight_act_corr');
 197  weight_inh_corr = input_parameters('weight_inh_corr');
 198   
 199   
 200  * create equations
 201  total_obj .. total_diff =e= weight_balance3 * weight_mRNA_match * match_diff + weight_act_obj1 * act_diff1 + weight_inh_obj1 * inh_diff1;
 202   
 203   
 204  * equations for cInhibitor and cActivator (cActivator is basically null and unused right now)
 205  eq_cAct_calc(sample, gene) .. cAct_calc(sample, gene) =e= 10**act_TF_conc(sample) / 10**act_Kd(gene);
 206   
 207  eq_cInh_calc(sample, gene) .. cInh_calc(sample, gene) =e= 3 * (10**inh_metab_Total(sample)) * 10**inh_Kd(gene) + input_constants('kd_inh_metab') * 10**inh_metab_Total(sample) + 3 * (10**inh_metab_Total(sample)) * meas_inh_TF(sample) + (-36*(10**inh_
      metab_Total(sample)) * (10**inh_Kd(gene))**2 * meas_inh_TF(sample) + (3 * (10**inh_metab_Total(sample)) * 10**inh_Kd(gene) + input_constants('kd_inh_metab') * 10**inh_Kd(gene) + 3 * (10**inh_Kd(gene) * meas_inh_TF(sample)))**2)**(.5) / (18 * (10**in
      h_Kd(gene))**2);
 208   
 209  * objective equations
 210  act_obj1 .. act_diff1 =e= sum((gene, sample), abs((cAct_calc(sample, gene) - cAct(sample, gene))));
 211   
 212  inh_obj1 .. inh_diff1 =e= sum((gene, sample), abs((cInh_calc(sample, gene) - cInh(sample, gene))));
 213   
 214   
 215  match_obj .. match_diff =e= sum((gene, sample), (abs(actual_mRNA(sample, gene) - ((cAct_calc(sample, gene)*basal_constants('KdRNAP', gene) + basal_constants('KdRNAPCrp', gene))*(basal_constants('KdRNAP', gene) + sample_constants('RNAP', sample) +  b
      asal_constants('KeqOpening', gene)*sample_constants('RNAP', sample))) / (((1 + cAct_calc(sample, gene) + cInh_calc(sample, gene))*basal_constants('KdRNAP', gene)*basal_constants('KdRNAPCrp', gene) + cAct_calc(sample, gene)*basal_constants('KdRNAP', 
      gene)*(1 + basal_constants('KeqOpening', gene))*sample_constants('RNAP', sample) + basal_constants('KdRNAPCrp', gene)*(1 + basal_constants('KeqOpening', gene))*sample_constants('RNAP', sample)))))**2 );
 216   
 217   
 218   
 219  * modify model parameters
 220  Option Iterlim=10000;
 221  *$set dnlp acc=1e-15  // Set the accuracy or tolerance level
 222  *$set dnlp step=1e-15  // Set the step size
 223   
 224  * run the model
GAMS 28.2.0  r750fa45 Released Aug 19, 2019 WEX-WEI x86 64bit/MS Windows                                                                                                                                                               01/24/24 16:13:48 Page 6
cActivator toy example
C o m p i l a t i o n


 225  Model ElementWiseOptimization /all/;
 226  ElementWiseOptimization.optfile = 1;
 227  Solve ElementWiseOptimization using dnlp minimizing total_diff;
****                                                                $257
 228   
 229   
 230  * Export results
 231  execute_unload "./output_GDX/cAct_TF_conc_results.gdx" act_TF_conc.L act_TF_conc.M
 232  execute 'gdxdump ./output_GDX/cAct_TF_conc_results.gdx noData > ./output_files/cAct_TF_conc_results.csv symb=act_TF_conc format=csv';
 233   
 234  execute_unload "./output_GDX/cAct_Kd_results.gdx" act_Kd.L act_Kd.M
 235  execute 'gdxdump ./output_GDX/cAct_Kd_results.gdx noData > ./output_files/cAct_Kd_results.csv symb=act_Kd format=csv';
 236   
 237  execute_unload "./output_GDX/cInh_Kd_results.gdx" inh_Kd.L inh_Kd.M
 238  execute 'gdxdump ./output_GDX/cInh_Kd_results.gdx noData > ./output_files/cInh_Kd_results.csv symb=inh_Kd format=csv';
 239   
 240  execute_unload "./output_GDX/inh_metab_Total.gdx" inh_metab_Total.L inh_metab_Total.M
 241  execute 'gdxdump ./output_GDX/inh_metab_Total.gdx noData > ./output_files/inh_metab_Total.csv symb=inh_metab_Total format=csv';
GAMS 28.2.0  r750fa45 Released Aug 19, 2019 WEX-WEI x86 64bit/MS Windows                                                                                                                                                               01/24/24 16:13:48 Page 7
cActivator toy example
Error Messages


141  Symbol declared but no values have been assigned. Check for missing
        data definition, assignment, data loading or implicit assignment
        via a solve statement.
        A wild shot: You may have spurious commas in the explanatory
        text of a declaration. Check symbol reference list.
257  Solve statement not checked because of previous errors
352  Set has not been initialized
502  GDXIN  file not open - ignore rest of line
510  Unable to open gdx file for $GDXIN

**** 39 ERROR(S)   0 WARNING(S)
GAMS 28.2.0  r750fa45 Released Aug 19, 2019 WEX-WEI x86 64bit/MS Windows                                                                                                                                                               01/24/24 16:13:48 Page 8
cActivator toy example
Include File Summary


   SEQ   GLOBAL TYPE      PARENT   LOCAL  FILENAME

     1        1 INPUT          0       0  C:\Users\SBRG_2024\Documents\GitHub\regulonML\GAMs\runs\run_0\combined_model.gms
     2       46 CALL           1      46  csv2gdx ./input_files/composite_cAct_vals.csv id=cAct index=1 values=2..lastCol useHeader=y trace=0 output=./input_GDX/input_cAct.gdx
     3       54 CALL           1      54  csv2gdx ./input_files/composite_cInh_vals.csv id=cInh index=1 values=2..lastCol useHeader=y trace=0 output=./input_GDX/input_cInh.gdx
     4       60 CALL           1      60  csv2gdx ./input_files/exported_act_TF_conc.csv id=meas_act_TF index=1 values=2..lastCol useHeader=y trace=0 output=./input_GDX/input_act_TF_conc.gdx
     5       66 CALL           1      66  csv2gdx ./input_files/exported_inh_TF_conc.csv id=meas_inh_TF index=1 values=2..lastCol useHeader=y trace=0 output=./input_GDX/input_inh_TF_conc.gdx
     6       72 CALL           1      72  csv2gdx ./input_files/grid_constants.csv id=basal_constants index=1 values=2..lastCol useHeader=y trace=0 output=./input_GDX/basal.gdx
     7       78 CALL           1      78  csv2gdx ./input_files/sample_constants.csv id=sample_constants index=1 values=2..lastCol useHeader=y trace=0 output=./input_GDX/sample_basal.gdx
     8       84 CALL           1      84  csv2gdx ./input_files/input_constants.csv id=input_constants index=1 values=2..lastCol useHeader=y trace=0 output=./input_GDX/input_constants.gdx
     9       90 CALL           1      90  csv2gdx ./input_files/actual_mRNA_ratio.csv id=actual_mRNA index=1 values=2..lastCol useHeader=y trace=0 output=./input_GDX/actual_mRNA.gdx
    10       96 CALL           1      96  csv2gdx ./input_files/max_cActs.csv id=max_cAct index=1 values=2..lastCol useHeader=y trace=0 output=./input_GDX/max_cAct.gdx
    11      102 CALL           1     102  csv2gdx ./input_files/max_cInhs.csv id=max_cInh index=1 values=2..lastCol useHeader=y trace=0 output=./input_GDX/max_cInh.gdx
    12      108 CALL           1     108  csv2gdx ./input_files/parameters.csv id=input_parameters index=1 values=2..lastCol useHeader=y trace=0 output=./input_GDX/input_parameters.gdx


COMPILATION TIME     =        6.625 SECONDS      3 MB  28.2.0 r750fa45 WEX-WEI


USER: Bernhard Palsson, Single User License          G190618/0001AO-GEN
      Univeristy of California, San Diego, Bioengineering       DC12250
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      C:\Users\SBRG_2024\Documents\GitHub\regulonML\GAMs\runs\run_0\combined_model.gms
Output     C:\Users\SBRG_2024\Documents\GitHub\regulonML\merged_workflow\combined_model.lst

**** USER ERROR(S) ENCOUNTERED
