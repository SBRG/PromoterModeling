GAMS 28.2.0  r750fa45 Released Aug 19, 2019 WEX-WEI x86 64bit/MS Windows - 02/19/24 15:15:24 Page 1
No Activator, metaboltie binding inhibitor
C o m p i l a t i o n


   2  Option Seed=42;
   3   
   4  * Load in cEffector Matrix
   5  * Set Dimensions
   6  Set
   7     iM 'iModulons'
   8     gene 'genes'
   9     sample 'samples'
  10     stable_constant 'constant across all'
  11         / kd_act_metab,
  12           kd_inh_metab /
  13     gene_constant 'grid basal constants'
  14         / KdRNAP,
  15           KdRNAPCrp,
  16           mRNA_total,
  17           cell_volume,
  18           k_d_TF,
  19           kDeg,
  20           promoterConcVal,
  21           TF,
  22           u,
  23           kEscape,
  24           KeqOpening /
  25      sample_constant 'grid basal constants'
  26         / RNAP /
  27      limits 'input parameters'
  28         / act_TF_conc_lo,
  29           act_TF_conc_up,
  30           act_Kd_lo,
  31           act_Kd_up,
  32           inh_TF_conc_lo,
  33           inh_TF_conc_up,
  34           inh_Kd_lo,
  35           inh_Kd_up,
  36           weight_act_obj1,
  37           weight_inh_obj1,
  38           weight_act_obj2,
  39           weight_inh_obj2,
  40           weight_mRNA_match,
  41           weight_act_corr,
  42           weight_inh_corr,
  43           act_metab_Total_lo,
  44           act_metab_Total_up,
  45           inh_metab_Total_lo,
  46           inh_metab_Total_up /
  47   
  48  * Load in saved values
  49  * Load in saved values
GDXIN   C:\Users\SBRG_2024\Documents\GitHub\regulonML\GAMs\./input_GDX/input_cAct.gdx
  52  $load gene = dim1
****                  $492
**** 492  Symbol not in GDX
  53  $load iM = dim2
****                $492
**** 492  Symbol not in GDX
  54  $load sample = dim3
****                    $492
**** 492  Symbol not in GDX
  55  Parameter cAct(gene, iM, sample) 'cAct values';
  56  $load cAct
****           $492
**** 492  Symbol not in GDX
  58   
GDXIN   C:\Users\SBRG_2024\Documents\GitHub\regulonML\GAMs\./input_GDX/input_cInh.gdx
  61  Parameter cInh(gene, iM, sample) 'cInh values';
  62  $load cInh
****           $492
**** 492  Symbol not in GDX
  64   
GDXIN   C:\Users\SBRG_2024\Documents\GitHub\regulonML\GAMs\./input_GDX/input_act_TF_conc.gdx
  67  Parameter meas_act_TF(sample, iM) 'actual act TF values';
  68  $load meas_act_TF
****                  $492
**** 492  Symbol not in GDX
  70   
GDXIN   C:\Users\SBRG_2024\Documents\GitHub\regulonML\GAMs\./input_GDX/input_inh_TF_conc.gdx
  73  Parameter meas_inh_TF(sample, iM) 'actual inh TF values';
  74  $load meas_inh_TF
****                  $492
**** 492  Symbol not in GDX
  76   
GDXIN   C:\Users\SBRG_2024\Documents\GitHub\regulonML\GAMs\./input_GDX/basal.gdx
  79  Parameter basal_constants(gene_constant, gene) 'basal constants';
  80  $load basal_constants
****                      $492
**** 492  Symbol not in GDX
  82   
GDXIN   C:\Users\SBRG_2024\Documents\GitHub\regulonML\GAMs\./input_GDX/sample_basal.gdx
  85  Parameter sample_constants(sample_constant, sample) 'sample constants';
  86  $load sample_constants
****                       $492
**** 492  Symbol not in GDX
  88   
GDXIN   C:\Users\SBRG_2024\Documents\GitHub\regulonML\GAMs\./input_GDX/input_constants.gdx
  91  Parameter input_constants(stable_constant) 'input constants';
  92  $load input_constants
****                      $492
**** 492  Symbol not in GDX
  94   
GDXIN   C:\Users\SBRG_2024\Documents\GitHub\regulonML\GAMs\./input_GDX/actual_mRNA.gdx
  97  Parameter actual_mRNA(sample, gene) 'actual_mRNA';
  98  $load actual_mRNA
****                  $492
**** 492  Symbol not in GDX
 100   
GDXIN   C:\Users\SBRG_2024\Documents\GitHub\regulonML\GAMs\./input_GDX/max_cAct.gdx
 103  Parameter max_cAct(gene) 'max_cAct';
 104  $load max_cAct
****               $492
**** 492  Symbol not in GDX
 106   
GDXIN   C:\Users\SBRG_2024\Documents\GitHub\regulonML\GAMs\./input_GDX/max_cInh.gdx
 109  Parameter max_cInh(gene) 'max_cInh';
 110  $load max_cInh
****               $492
**** 492  Symbol not in GDX
 112   
GDXIN   C:\Users\SBRG_2024\Documents\GitHub\regulonML\GAMs\./input_GDX/input_parameters.gdx
 115  Parameter input_parameters(limits) 'input_paras';
 116  $load input_parameters
****                       $492
**** 492  Symbol not in GDX
 118   
 119   
 120  ***
 121  * Set up other matrices
 122  Variables
 123      act_Kd(gene, iM) 'Kd Values'
 124      inh_Kd(gene, iM) 'Kd Values'
 125      act_metab_Total(sample, iM)
 126      inh_metab_Total(sample, iM);
 127   
 128  Display input_parameters;
****                         $141
**** 141  Symbol declared but no values have been assigned. Check for missing
****         data definition, assignment, data loading or implicit assignment
****         via a solve statement.
****         A wild shot: You may have spurious commas in the explanatory
****         text of a declaration. Check symbol reference list.
 129  Display sample_constants;
****                         $141
**** 141  Symbol declared but no values have been assigned. Check for missing
****         data definition, assignment, data loading or implicit assignment
****         via a solve statement.
****         A wild shot: You may have spurious commas in the explanatory
****         text of a declaration. Check symbol reference list.
 130   
 131   
 132  * constrain matrices
 133  act_Kd.lo(gene, iM) = log10(input_parameters('act_Kd_lo'));
****               $352$352
**** 352  Set has not been initialized
 134  act_Kd.up(gene, iM) = log10(input_parameters('act_Kd_up'));
****               $352$352
**** 352  Set has not been initialized
 135  inh_Kd.lo(gene, iM) = log10(input_parameters('inh_Kd_lo'));
****               $352$352
**** 352  Set has not been initialized
 136  inh_Kd.up(gene, iM) = log10(input_parameters('inh_Kd_up'));
****               $352$352
**** 352  Set has not been initialized
 137  act_metab_Total.lo(sample, iM) = log10(input_parameters('act_metab_Total_lo'));
****                          $352$352
**** 352  Set has not been initialized
 138  act_metab_Total.up(sample, iM) = log10(input_parameters('act_metab_Total_up'));
****                          $352$352
**** 352  Set has not been initialized
 139  inh_metab_Total.lo(sample, iM) = log10(input_parameters('inh_metab_Total_lo'));
****                          $352$352
**** 352  Set has not been initialized
 140  inh_metab_Total.up(sample, iM) = log10(input_parameters('inh_metab_Total_up'));
****                          $352$352
**** 352  Set has not been initialized
 141   
 142   
 143  * initialize matrices
 144  act_Kd.l(gene, iM) = uniformInt(-10, -3);
****              $352$352
**** 352  Set has not been initialized
 145  inh_Kd.l(gene, iM) = uniformInt(-10, -3);
****              $352$352
**** 352  Set has not been initialized
 146  act_metab_Total.l(sample, iM) = uniformInt(-10, -3);
****                         $352$352
**** 352  Set has not been initialized
 147  inh_metab_Total.l(sample, iM) = uniformInt(-10, -3);
****                         $352$352
**** 352  Set has not been initialized
 148   
 149   
 150  * Now set up the optimization
 151  Variables
 152      act_diff1   difference between TF_conc div Kd and Ceff
 153      inh_diff1   similar
 154      match_diff
 155      total_diff;
 156   
 157   
 158  * calculated sub variables
 159  Variables
 160      cAct_calc(sample, gene)
 161      cInh_calc(sample, gene);
 162   
 163  Equations
 164      eq_cAct_calc(sample, gene)
 165      eq_cInh_calc(sample, gene);
 166   
 167  Equations
 168      act_obj1   difference between TF_conc div Kd and cEff
 169      inh_obj1   difference between TF_conc div Kd and cEff
 170      match_obj  difference between predicted and actual mRNA
 171      total_obj;
 172   
 173   
 174  * Set weights for the two objectives (you can adjust these weights as needed)
 175  * mRNA weighting
 176  Scalar weight_balance3 /195260.5676/;
 177  * TF conenctration correlation matching
 178  Scalar weight_balance4 /1953.70798879785/;
 179  Scalar weight_act_obj1 /1/;
 180  Scalar weight_inh_obj1 /1/;
 181  Scalar weight_mRNA_match /0/;
 182   
 183   
 184  * set them from parameters file
 185  weight_act_obj1 = input_parameters('weight_act_obj1');
 186  weight_inh_obj1 = input_parameters('weight_inh_obj1');
 187  weight_mRNA_match = input_parameters('weight_mRNA_match');
 188   
 189   
 190  * create equations
 191  total_obj .. total_diff =e= weight_balance3 * weight_mRNA_match * match_diff + weight_act_obj1 * act_diff1 + weight_inh_obj1 * inh_diff1;
 192   
 193   
 194  * equations for cInhibitor and cActivator (cActivator is basically null and unused right now)
 195  eq_cAct_calc(sample, gene) .. cAct_calc(sample, gene) =e= sum(iM, 3 * (10**act_metab_Total(sample, iM)) * 10**act_Kd(gene, iM) + input_constants('kd_act_metab') * 10**act_metab_Total(sample, iM) + 3 * (10**act_metab_Total(sample, iM)) * meas_act_TF(
      sample, iM) + (-36*(10**act_metab_Total(sample, iM)) * (10**act_Kd(gene, iM))**2 * meas_act_TF(sample, iM) + (3 * (10**act_metab_Total(sample, iM)) * 10**act_Kd(gene, iM) + input_constants('kd_act_metab') * 10**act_Kd(gene, iM) + 3 * (10**act_Kd(gen
      e, iM) * meas_act_TF(sample, iM)))**2)**(.5) / (18 * (10**act_Kd(gene, iM))**2));
 196   
 197  eq_cInh_calc(sample, gene) .. cInh_calc(sample, gene) =e= sum(iM, 3 * (10**inh_metab_Total(sample, iM)) * 10**inh_Kd(gene, iM) + input_constants('kd_inh_metab') * 10**inh_metab_Total(sample, iM) + 3 * (10**inh_metab_Total(sample, iM)) * meas_inh_TF(
      sample, iM) + (-36*(10**inh_metab_Total(sample, iM)) * (10**inh_Kd(gene, iM))**2 * meas_inh_TF(sample, iM) + (3 * (10**inh_metab_Total(sample, iM)) * 10**inh_Kd(gene, iM) + input_constants('kd_inh_metab') * 10**inh_Kd(gene, iM) + 3 * (10**inh_Kd(gen
      e, iM) * meas_inh_TF(sample, iM)))**2)**(.5) / (18 * (10**inh_Kd(gene, iM))**2));
 198   
 199   
 200  * objective equations
 201  act_obj1 .. act_diff1 =e= sum((gene, sample), (abs((cAct_calc(sample, gene) - sum(iM, cAct(gene, iM, sample)))) / max_cAct(gene) )**2);
 202   
 203  inh_obj1 .. inh_diff1 =e= sum((gene, sample), (abs((cInh_calc(sample, gene) - sum(iM, cInh(gene, iM, sample)))) / max_cInh(gene) )**2);
 204   
 205  match_obj .. match_diff =e= 1;
 206  * setting to a constant for now to get the multidimensionality working
 207  *sum((gene, sample), (abs(actual_mRNA(sample, gene) - ((cAct_calc(sample, gene)*basal_constants('KdRNAP', gene) + basal_constants('KdRNAPCrp', gene))*(basal_constants('KdRNAP', gene) + sample_constants('RNAP', sample) +  basal_constants('KeqOpening'
      , gene)*sample_constants('RNAP', sample))) / (((1 + cAct_calc(sample, gene) + cInh_calc(sample, gene))*basal_constants('KdRNAP', gene)*basal_constants('KdRNAPCrp', gene) + cAct_calc(sample, gene)*basal_constants('KdRNAP', gene)*(1 + basal_constants(
      'KeqOpening', gene))*sample_constants('RNAP', sample) + basal_constants('KdRNAPCrp', gene)*(1 + basal_constants('KeqOpening', gene))*sample_constants('RNAP', sample)))))**2 );
 208   
 209   
 210  * modify model parameters
 211  Option Iterlim=10000;
 212  *$set dnlp acc=1e-15  // Set the accuracy or tolerance level
 213  *$set dnlp step=1e-15  // Set the step size
 214   
 215   
 216  * run the model
 217  Model ElementWiseOptimization /all/;
 218  ElementWiseOptimization.optfile = 1;
 219  Solve ElementWiseOptimization using dnlp minimizing total_diff;
****                                                                $257
**** 257  Solve statement not checked because of previous errors
 220   
 221   
 222  * Export results
 223  execute_unload "./output_GDX/act_metab_Total.gdx" act_metab_Total.L act_metab_Total.M
 224  execute 'gdxdump ./output_GDX/act_metab_Total.gdx noData > ./output_files/act_metab_Total.csv symb=act_metab_Total format=csv';
 225   
 226  execute_unload "./output_GDX/cAct_Kd_results.gdx" act_Kd.L act_Kd.M
 227  execute 'gdxdump ./output_GDX/cAct_Kd_results.gdx noData > ./output_files/cAct_Kd_results.csv symb=act_Kd format=csv';
 228   
 229  execute_unload "./output_GDX/cInh_Kd_results.gdx" inh_Kd.L inh_Kd.M
 230  execute 'gdxdump ./output_GDX/cInh_Kd_results.gdx noData > ./output_files/cInh_Kd_results.csv symb=inh_Kd format=csv';
 231   
 232  execute_unload "./output_GDX/inh_metab_Total.gdx" inh_metab_Total.L inh_metab_Total.M
 233  execute 'gdxdump ./output_GDX/inh_metab_Total.gdx noData > ./output_files/inh_metab_Total.csv symb=inh_metab_Total format=csv';

**** 41 ERROR(S)   0 WARNING(S)
GAMS 28.2.0  r750fa45 Released Aug 19, 2019 WEX-WEI x86 64bit/MS Windows - 02/19/24 15:15:24 Page 2
No Activator, metaboltie binding inhibitor
Include File Summary


   SEQ   GLOBAL TYPE      PARENT   LOCAL  FILENAME

     1        1 INPUT          0       0  C:\Users\SBRG_2024\Documents\GitHub\regulonML\GAMs\merged_iMs_model.gms
     2       50 CALL           1      50  csv2gdx ./input_files/composite_cAct_vals.csv id=cAct index=1,2 values=3..lastCol useHeader=y output=./input_GDX/input_cAct.gdx
     3       51 GDXIN          1      51  C:\Users\SBRG_2024\Documents\GitHub\regulonML\GAMs\./input_GDX/input_cAct.gdx
     4       59 CALL           1      59  csv2gdx ./input_files/composite_cInh_vals.csv id=cInh index=1,2 values=3..lastCol useHeader=y trace=0 output=./input_GDX/input_cInh.gdx
     5       60 GDXIN          1      60  C:\Users\SBRG_2024\Documents\GitHub\regulonML\GAMs\./input_GDX/input_cInh.gdx
     6       65 CALL           1      65  csv2gdx ./input_files/exported_act_TF_conc.csv id=meas_act_TF index=1 values=2..lastCol useHeader=y trace=0 output=./input_GDX/input_act_TF_conc.gdx
     7       66 GDXIN          1      66  C:\Users\SBRG_2024\Documents\GitHub\regulonML\GAMs\./input_GDX/input_act_TF_conc.gdx
     8       71 CALL           1      71  csv2gdx ./input_files/exported_inh_TF_conc.csv id=meas_inh_TF index=1 values=2..lastCol useHeader=y trace=0 output=./input_GDX/input_inh_TF_conc.gdx
     9       72 GDXIN          1      72  C:\Users\SBRG_2024\Documents\GitHub\regulonML\GAMs\./input_GDX/input_inh_TF_conc.gdx
    10       77 CALL           1      77  csv2gdx ./input_files/grid_constants.csv id=basal_constants index=1 values=2..lastCol useHeader=y trace=0 output=./input_GDX/basal.gdx
    11       78 GDXIN          1      78  C:\Users\SBRG_2024\Documents\GitHub\regulonML\GAMs\./input_GDX/basal.gdx
    12       83 CALL           1      83  csv2gdx ./input_files/sample_constants.csv id=sample_constants index=1 values=2..lastCol useHeader=y trace=0 output=./input_GDX/sample_basal.gdx
    13       84 GDXIN          1      84  C:\Users\SBRG_2024\Documents\GitHub\regulonML\GAMs\./input_GDX/sample_basal.gdx
    14       89 CALL           1      89  csv2gdx ./input_files/input_constants.csv id=input_constants index=1 values=2..lastCol useHeader=y trace=0 output=./input_GDX/input_constants.gdx
    15       90 GDXIN          1      90  C:\Users\SBRG_2024\Documents\GitHub\regulonML\GAMs\./input_GDX/input_constants.gdx
    16       95 CALL           1      95  csv2gdx ./input_files/actual_mRNA_ratio.csv id=actual_mRNA index=1 values=2..lastCol useHeader=y trace=0 output=./input_GDX/actual_mRNA.gdx
    17       96 GDXIN          1      96  C:\Users\SBRG_2024\Documents\GitHub\regulonML\GAMs\./input_GDX/actual_mRNA.gdx
    18      101 CALL           1     101  csv2gdx ./input_files/max_cActs.csv id=max_cAct index=1 values=2..lastCol useHeader=y trace=0 output=./input_GDX/max_cAct.gdx
    19      102 GDXIN          1     102  C:\Users\SBRG_2024\Documents\GitHub\regulonML\GAMs\./input_GDX/max_cAct.gdx
    20      107 CALL           1     107  csv2gdx ./input_files/max_cInhs.csv id=max_cInh index=1 values=2..lastCol useHeader=y trace=0 output=./input_GDX/max_cInh.gdx
    21      108 GDXIN          1     108  C:\Users\SBRG_2024\Documents\GitHub\regulonML\GAMs\./input_GDX/max_cInh.gdx
    22      113 CALL           1     113  csv2gdx ./input_files/parameters.csv id=input_parameters index=1 values=2..lastCol useHeader=y trace=0 output=./input_GDX/input_parameters.gdx
    23      114 GDXIN          1     114  C:\Users\SBRG_2024\Documents\GitHub\regulonML\GAMs\./input_GDX/input_parameters.gdx


COMPILATION TIME     =        0.250 SECONDS      3 MB  28.2.0 r750fa45 WEX-WEI


USER: Bernhard Palsson, Single User License          G190618/0001AO-GEN
      Univeristy of California, San Diego, Bioengineering       DC12250
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      C:\Users\SBRG_2024\Documents\GitHub\regulonML\GAMs\merged_iMs_model.gms
Output     C:\Users\SBRG_2024\Documents\GitHub\regulonML\GAMs\merged_iMs_model.lst

**** USER ERROR(S) ENCOUNTERED
